#include "cpu_evaluation_2_const.hxx"

#include "board.hxx"

void init_evaluation_constants() {
  static bool piece_value_constants_initialized = false;
  if (!piece_value_constants_initialized) {
    // Initialize black piece constants such that they are symmetric
    // with the white constants.
    for (int phase=0; phase<3; phase++) {
      for (int piece=PAWN; piece<=KING; piece++)
	for (int r=0; r<8; r++)
	  for (int c=0; c<8; c++) {
	    int p1 = CR_TO_POS[c][r];
	    int p2 = CR_TO_POS[c][r^7];
	    TPIECE_VALUES[phase][piece + 6][p1] = - TPIECE_VALUES[phase][piece][p2];
	  }
      // Byt om paa op og ned (forkert indtastet)
      for (int piece=PAWN; piece<=BKING; piece++)
	for (int r=0; r<4; r++)
	  for (int c=0; c<8; c++) {
	    int p1 = CR_TO_POS[c][r];
	    int p2 = CR_TO_POS[c][r^7]; 
	    swap(TPIECE_VALUES[phase][piece][p1], TPIECE_VALUES[phase][piece][p2]);
	  }
    }
    piece_value_constants_initialized = true;
  }
}

// Values are only specified for white pieces.
// Values for black pieces are set to minus the values for the white pieces

// REMARK!!! Values are written as 
//  a8 b8 c8 d8 e8 f8 g8 h8
//  a7 b7 c7 d7 e7 f7 g7 h7 
//  a6 b6 c6 d6 e6 f6 g6 h6 
//  a5 b5 c5 d5 e5 f5 g5 h5 
//  a4 b4 c4 d4 e4 f4 g4 h4 
//  a3 b3 c3 d3 e3 f3 g3 h3 
//  a2 b2 c2 d2 e2 f2 g2 h2 
//  a1 b1 c1 d1 e1 f1 g1 h1 
int TPIECE_VALUES[3][13][64] = // [piece][game_phase][pos]
{
  {
    // Opening game :
    // Penalty for moving queen.
    // Bonus for moving king and rook to the positions after a castling.
    
    {// Empty:
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {// White pawn:
      0,   0,   0,   0,   0,   0,   0,   0,
      1070,1070,1100,1100,1100,1100,1070,1070,
      1040,1040,1040,1070,1070,1100,1030,1030,
      1040,1040,1020,1055,1055,1070,1030,1030,
      1010,1010,1020,1050,1050,1050,1010,1010,
      1020,1030,1020,1030,1030,1020,1020,1020,
      1030,1000,1000,1000,1000,1030,1030,1030,
      0,   0,   0,   0,   0,   0,   0,   0
    }, {// White knight:
      2980,2990,3000,3000,3000,3000,2990,2980,
      2990,3000,3010,3010,3010,3010,3000,2990,
      3000,3010,3015,3020,3020,3015,3010,3000,
      3000,3020,3025,3030,3030,3025,3020,3000,
      3000,3020,3025,3030,3030,3025,3020,3000,
      3000,3010,3015,3020,3020,3015,3010,3000,
      2990,3000,3010,3020,3020,3010,3000,2990,
      2980,2990,3000,3000,3000,3000,2990,2980
    },{// White bishop:
      3000,3000,3000,3000,3000,3000,3000,3000,
      3025,3000,3005,3005,3005,3005,3000,3025,
      3015,3025,3010,3010,3010,3010,3025,3015,
      3015,3035,3020,3020,3020,3020,3035,3015,
      3015,3035,3025,3020,3020,3025,3035,3015,
      3015,3025,3020,3015,3015,3020,3025,3015,
      3007,3020,3010,3005,3005,3010,3030,3007,
      3000,3000,3000,3000,3000,3000,3000,3000
    },{// White rook:
      5000,5000,5000,5000,5000,5000,5000,5000,
      5000,5000,5000,5000,5000,5000,5000,5000,
      5010,5015,5020,5020,5020,5020,5015,5010,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5050,5040,5050,5030,5020,
      4980,5000,5050,5060,5040,5060,5000,4980,
      5000,5000,5020,5080,5000,5080,5000,5000
    },{// White queen (STAY!!!):
      9000,9000,9000,9000,9000,9000,9000,9000,
      9000,8900,9000,9000,9000,9000,9000,8900,
      9000,9000,9000,9010,9000,9000,9000,9000,
      9000,9000,9010,9030,9010,9000,9000,9000,
      9000,9010,9030,9060,9030,9010,9000,9000,
      9020,9030,9060,9100,9060,9030,9010,9000,
      9030,9060,9100,9150,9100,9060,9030,9010,
      9060,9100,9150,9210,9150,9100,9060,9030
    },{// White king:
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,40+10,0,40,0,40+20,0

    },{// The rest is black pieces, which are automatically set.
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }

  },{
    // Mid game
    
    {// Empty:
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {// White pawn:
      0,   0,   0,   0,   0,   0,   0,   0,
      1300,1300,1300,1300,1300,1300,1300,1300,
      1150,1150,1150,1150,1150,1150,1150,1150,
      1070,1070,1000,1100,1100,1100,1070,1070,
      1010,1010,1010,1050,1050,1050,1010,1010,
      1020,1030,1020,1030,1030,1020,1020,1020,
      1030,1000,1000,1000,1000,1030,1030,1030,
      0,   0,   0,   0,   0,   0,   0,   0
    }, {// White knight:
      2920,2950,3000,3000,3000,3000,2950,2920,
      2950,3000,3030,3020,3020,3030,3000,2950,
      3000,3030,3030,3030,3030,3030,3030,3000,
      2990,3030,3045,3040,3040,3045,3030,2990,
      2980,3030,3045,3040,3040,3045,3030,2980,
      2970,3030,3030,3028,3028,3030,3030,2970,
      2950,3000,3030,3020,3020,3030,3000,2950,
      2920,2980,3000,3000,3000,3000,2980,2920
    },{// White bishop:
      3000,3000,3000,3000,3000,3000,3000,3000,
      3050,3000,3010,3010,3010,3010,3000,3050,
      3030,3050,3020,3020,3020,3020,3050,3030,
      3030,3070,3040,3040,3040,3040,3070,3030,
      3030,3070,3050,3040,3040,3050,3070,3030,
      3030,3050,3040,3030,3030,3040,3050,3030,
      3015,3030,3020,3010,3010,3020,3050,3015,
      3000,3000,3000,3000,3000,3000,3000,3000
    },{// White rook:
      5050,5050,5050,5050,5050,5050,5050,5050,
      5100,5100,5100,5100,5100,5100,5100,5100,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5050,5040,5050,5030,5020,
      4980,5000,5050,5060,5040,5060,5000,4980,
      5000,5000,5020,5040,5000,5040,5000,5000
    },{// White queen:
      9040,9065,9075,9080,9080,9075,9065,9040,
      9065,9075,9085,9090,9090,9085,9075,9065,
      9075,9078,9090,9100,9100,9090,9078,9075,
      9090,9100,9110,9120,9120,9110,9100,9090,
      9095,9105,9115,9125,9125,9115,9105,9095,
      9090,9100,9120,9120,9120,9120,9100,9090,
      9060,9090,9090,9100,9100,9090,9090,9060,
      9000,9060,9070,9080,9080,9070,9060,9000
    },{// White king:
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0, 0,  0,  0,  0, 0, 0,
       0, 0,10,-50,-50,-50,10, 0,
       0,20,40,-50,  0,-50,40,10

    },{// The rest is black pieces, which are automatically set.
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }
    
  },{
    // End game
    // Peasants aggressive


    
    {// Empty:
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {// White pawn:
      0,   0,   0,   0,   0,   0,   0,   0,
      1600,1600,1600,1600,1600,1600,1600,1600,
      1350,1350,1350,1350,1350,1350,1350,1350,
      1200,1200,1200,1200,1200,1200,1200,1200,
      1100,1100,1100,1100,1100,1100,1100,1100,
      1040,1040,1040,1040,1040,1040,1040,1040,
      1000,1000,1000,1000,1000,1000,1000,1000,
      0,   0,   0,   0,   0,   0,   0,   0
    }, {// White knight:
      2900,2950,3000,3000,3000,3000,2950,2900,
      2950,3000,3030,3050,3050,3030,3000,2950,
      3000,3030,3050,3080,3080,3050,3030,3000,
      2990,3050,3080,3100,3100,3080,3050,2990,
      2980,3050,3080,3100,3100,3080,3050,2980,
      2970,3030,3050,3080,3080,3050,3030,2970,
      2950,3000,3030,3050,3050,3030,3000,2950,
      2900,2950,3000,3000,3000,3000,2950,2900
    },{// White bishop:
      3000,3000,3000,3000,3000,3000,3000,3000,
      3050,3000,3010,3010,3010,3010,3000,3050,
      3030,3050,3020,3020,3020,3020,3050,3030,
      3030,3070,3040,3040,3040,3040,3070,3030,
      3030,3070,3050,3040,3040,3050,3070,3030,
      3030,3050,3040,3030,3030,3040,3050,3030,
      3015,3040,3020,3010,3010,3020,3040,3015,
      3000,3000,3000,3000,3000,3000,3000,3000
    },{// White rook:
      5050,5050,5050,5050,5050,5050,5050,5050,
      5100,5100,5100,5100,5100,5100,5100,5100,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5040,5040,5040,5030,5020,
      5020,5030,5040,5050,5040,5050,5030,5020,
      4980,5000,5050,5060,5040,5060,5000,4980,
      5000,5000,5020,5040,5000,5040,5000,5000
    },{// White queen:  CHANGED! (to a bit more aggressive)
      9065,9075,9085,9090,9090,9085,9075,9065,
      9075,9078,9090,9100,9100,9090,9078,9075,
      9090,9100,9110,9120,9120,9110,9100,9090,
      9095,9105,9115,9125,9125,9115,9105,9095,
      9090,9100,9120,9120,9120,9120,9100,9090,
      9060,9090,9090,9100,9100,9090,9090,9060,
      9040,9060,9070,9080,9080,9070,9060,9040,
      9000,9040,9050,9060,9060,9050,9040,9000
    },{// White king:  CHANGED!
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
       0, 0, 0, 0, 0, 0, 0, 0,
    },{// The rest is black pieces, which are automatically set.
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }, {
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0,
      0,0,0,0,0,0,0,0
    }
  }
};

